{"version":3,"file":"react.esm.js","sources":["../src/lib/handler.ts","../src/index.ts"],"sourcesContent":["import { FormcarryResponse } from './types'\n\nconst backgroundColor = '#262335'\nconst backgroundProperty = `background-color: ${backgroundColor}`\nconst yellow = '#FEDE5D'\nconst pink = '#D86FD4'\nconst orange = '#F88839'\nconst gray = '#E2E1E5'\nconst grayDarker = '#B3AEAE'\nconst turquoise = '#36F5F3'\nconst lightBlue = '#84C9F4'\n\nexport function errorHandler(err: FormcarryResponse) {\n\tconsole.group('%c ðŸš¨ Formcarry Error ðŸš¨', 'background: #E44141; color: #fff')\n\tconsole.table(err)\n\tconsole.log(\n\t\t`%cif you want to disable debugging, just set debug to false like:`,\n\t\t'color: #11C759',\n\t)\n\tconsole.log(\n\t\t'%cconst %c{state, submit} %c= %cuseForm%c(%c{ %cdebug%c: %cfalse %c}%c);',\n\t\t`${backgroundProperty}; color: ${yellow}`,\n\t\t`${backgroundProperty}; color: ${pink}`,\n\t\t`${backgroundProperty}; color: ${gray}`,\n\t\t`${backgroundProperty}; color: ${turquoise}`,\n\t\t`${backgroundProperty}; color: ${pink}`,\n\t\t`${backgroundProperty}; color: ${turquoise}`,\n\t\t`${backgroundProperty}; color: ${yellow}`,\n\t\t`${backgroundProperty}; color: ${grayDarker}`,\n\t\t`${backgroundProperty}; color: ${orange}`,\n\t\t`${backgroundProperty}; color: ${lightBlue}`,\n\t\t`${backgroundProperty}; color: ${pink}`,\n\t)\n\tconsole.groupEnd()\n}\n\nexport function noIdHandler() {\n\tconsole.log(\n\t\t'%cðŸ’¥ Please set your form ID, you can get it from your dashboard: https://formcarry.com/profile/my-forms',\n\t\t'background-color: #FCB56D; color: #000',\n\t)\n\tconsole.log(\n\t\t'%cconst %c{state, submit} %c= %cuseForm%c(%c{ %cid%c: %c\"Your Form ID\" %c}%c);',\n\t\t`${backgroundProperty}; color: ${yellow}`,\n\t\t`${backgroundProperty}; color: ${pink}`,\n\t\t`${backgroundProperty}; color: ${gray}`,\n\t\t`${backgroundProperty}; color: ${turquoise}`,\n\t\t`${backgroundProperty}; color: ${pink}`,\n\t\t`${backgroundProperty}; color: ${turquoise}`,\n\t\t`${backgroundProperty}; color: ${yellow}`,\n\t\t`${backgroundProperty}; color: ${grayDarker}`,\n\t\t`${backgroundProperty}; color: ${orange}`,\n\t\t`${backgroundProperty}; color: ${lightBlue}`,\n\t\t`${backgroundProperty}; color: ${pink}`,\n\t)\n}\n","import React, { useState, useEffect } from 'react'\nimport { Props, FormcarryResponse } from './lib/types'\nimport { errorHandler, noIdHandler } from './lib/handler'\n\nfunction useForm(props: Props) {\n\tconst { id, debug = true, extraData } = props\n\tconst [submitted, setSubmitted] = useState<boolean>(false)\n\tconst [submitting, setSubmitting] = useState<boolean>(false)\n\tconst [error, setError] = useState<any>(undefined)\n\tconst [response, setResponse] = useState<FormcarryResponse>()\n\n\tuseEffect(() => {\n\t\tif (error && debug) {\n\t\t\terrorHandler(error)\n\t\t}\n\t}, [debug, error])\n\n\tfunction submit(event: React.FormEvent<HTMLFormElement>) {\n\t\t// prevent redirection\n\t\tevent.preventDefault()\n\n\t\tif (!id) {\n\t\t\tnoIdHandler()\n\t\t\treturn\n\t\t}\n\n\t\tconst data = new FormData(event.currentTarget)\n\n\t\tif (typeof extraData === 'object') {\n\t\t\tfor (const item in extraData) {\n\t\t\t\tif (extraData.hasOwnProperty(item)) {\n\t\t\t\t\tdata.append(item, extraData[item])\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// reset states.\n\t\tsetSubmitted(false)\n\t\tsetError(undefined)\n\t\tsetResponse(undefined)\n\n\t\tsetSubmitting(true)\n\n\t\tfetch(`https://formcarry.com/s/${id}`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: { Accept: 'application/json' },\n\t\t\tbody: data,\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then((res: FormcarryResponse) => {\n\t\t\t\tif (res.code === 200) {\n\t\t\t\t\tsetSubmitted(true)\n\t\t\t\t\tsetResponse(res)\n\t\t\t\t} else {\n\t\t\t\t\tsetError(res)\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tsetError(err)\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tsetSubmitting(false)\n\t\t\t})\n\t}\n\n\treturn { state: { error, response, submitting, submitted }, submit }\n}\n\nexport { useForm }\n"],"names":["backgroundColor","backgroundProperty","yellow","pink","orange","gray","grayDarker","turquoise","lightBlue","errorHandler","err","console","group","table","log","groupEnd","noIdHandler","useForm","props","id","debug","extraData","useState","submitted","setSubmitted","submitting","setSubmitting","undefined","error","setError","response","setResponse","useEffect","submit","event","preventDefault","data","FormData","currentTarget","item","hasOwnProperty","append","fetch","method","headers","Accept","body","then","res","json","code","state"],"mappings":"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"}